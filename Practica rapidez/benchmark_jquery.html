<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Benchmark JQuery</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body, html { margin: 0; height: 100%; font-family: sans-serif; }
        #juego { height: 100vh; display: flex; justify-content: center; align-items: center; color: white; cursor: pointer; background-color: #2b87d1; }
        .esperando { background-color: #ce2633; }
        .ya { background-color: #4bdb66; }
    </style>
</head>
<body>
    <div id="juego">
        <h1 id="info">Test JQuery: Clica para empezar</h1>
    </div>

    <script>
        var t_ref, temporal, fase = 'uno';

        $('#juego').click(function() {
            if (fase == 'uno' || fase == 'cuatro') {
                fase = 'dos';
                $(this).addClass('esperando');
                $('#info').text('Espera...');

                temporal = setTimeout(function() {
                    fase = 'tres';
                    $('#juego').removeClass('esperando').addClass('ya');
                    $('#info').text('¡DALE!');
                    t_ref = Date.now();
                }, 2500);

            } else if (fase == 'dos') {
                clearTimeout(temporal);
                fase = 'cuatro';
                $(this).removeClass('esperando');
                $('#info').text('Fallo por rápido. Clica de nuevo.');

            } else if (fase == 'tres') {
                var final = Date.now() - t_ref;
                fase = 'cuatro';
                $(this).removeClass('ya');
                $('#info').text(final + ' ms');
            }
        });
    </script>
</body>
</html>